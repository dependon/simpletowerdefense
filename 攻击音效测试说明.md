# 攻击音效测试说明

## 功能概述
已成功为塔防游戏添加了攻击音效功能，使用 `attack.wav` 音频文件。

## 实现的功能

### 1. 音效播放时机
- 防御塔每次攻击敌人时播放音效
- 每次攻击周期只播放一次音效（避免多个子弹同时发射时重复播放）

### 2. 音效优化
- **音量控制**: 设置为 -10dB 到 -12dB 之间的随机音量，避免过于突兀
- **音调变化**: 每次播放时音调在 0.9 到 1.1 倍之间随机变化，增加音效的丰富性
- **避免单调**: 通过随机化参数让每次攻击音效略有不同

### 3. 支持的防御塔类型
所有防御塔类型都已添加攻击音效支持：
- 基础塔 (tower_base)
- 快速塔 (tower_fast)
- 冰霜塔 (tower_frost)
- 范围塔 (tower_area)
- 快速低伤害塔 (tower_fast_low_damage)
- 大范围塔 (tower_big_area)

## 测试方法

1. **启动游戏**: 运行塔防游戏
2. **进入战斗**: 选择任意关卡开始游戏
3. **建造防御塔**: 在建造点放置任意类型的防御塔
4. **等待敌人**: 当敌人进入防御塔攻击范围时
5. **听取音效**: 防御塔开火时会播放攻击音效

## 技术实现细节

### 代码修改
- 在 `tower_base.gd` 中添加了 `AudioStreamPlayer2D` 节点引用
- 在 `_ready()` 函数中初始化音效播放器
- 在 `_physics_process()` 函数中的攻击逻辑里添加音效播放
- 为所有防御塔场景文件添加了 `AttackAudio` 节点

### 音效参数
```gdscript
# 音量随机化（避免太突兀）
attack_audio.volume_db = randf_range(-12.0, -8.0)

# 音调随机化（增加变化）
attack_audio.pitch_scale = randf_range(0.9, 1.1)
```

## 注意事项

- 音效只在防御塔实际攻击敌人时播放
- 每个攻击周期只播放一次，避免音效重叠
- 音量和音调的随机化让音效更自然，不会过于机械化
- 所有防御塔类型都使用相同的攻击音效文件

## 如果遇到问题

1. **没有声音**: 检查系统音量设置和游戏音频设置
2. **音效太大声**: 可以在代码中调整 `volume_db` 的范围值
3. **音效太频繁**: 确认每个攻击周期只播放一次的逻辑正常工作

音效功能已完全集成到游戏中，提供了更好的游戏体验！